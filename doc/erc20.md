 # ERC-20 threefold tokens

## Motivation
A lot of the bigger exchanges support erc20 tokens but it would require some  effort to support tftokens directly. By creating an erc20 token to represent tft, these exchanges can support an and transfer tft  amongst each other without any effort. 
We propose to be able to send tft to an ethereum address, the bridge creates the tft erc20's and adds them to the target ethereum address. 
For the reverse, a receiving adress needs to be published on the tft chain first. A user can withdraw from an exchange to an eth adress generated by a tft wallet and a blockcreator node would include the coin creation transaction to a block. Every full node can run a validator to only accept valid eth to tft transactions.
This  allows a  user to easily convert tft to tft erc20 and back, making the process to transfer tft to an exchange that supports tfterc20  and back almost seamless.

### demo/test exchange wallet
[A small webapplication is available that mimics the balance page of an exchange for demo, test and development purposes](examples/erc20_monitor).

### Ethereum testnetworks

#### Rinkeby
Faucets:
- https://faucet.rinkeby.io
  Requires a Twitter, Google+ or Facebook post.
#### Ropsten
Faucets:
- https://faucet.ropsten.be 
  1 test ETH/ day can be requested here

## Technical
[Explanation of the ethereum contract](../erc20/README.md)

[Detailed  description of all erc20 related transactions](transactions.md#erc20-transactions)

Transactions relevant for wallets supporting this functionality:
- [Convert to erc20 transaction](transactions.md#erc20-convert-transaction)
- [Withdrawal address registration transaction](transactions.md#erc20-address-registration-transaction)
- [The coin creation transaction](https://github.com/threefoldfoundation/tfchain/blob/bridge_tft_erc20/doc/transactions.md#erc20-coin-creation-transaction) is created by the bridge, a wallet only needs to be able to understand it to take the coinoutputs in to account to be able to spend them.

The go code defining these transactions resides in [transactions_erc20.go](../pkg/types/transactions_erc20.go)

It is possible to query the status of a withdrawal address registration through the explorer by looking up the ERC20 address using the regular `/explorer/hashes/:hash` endpoint:

* If an error is and/or no reply is returned, than the ERC20 can be seen as `unregistered`;
* If a reply is returned than the `confirmations` child property from the `erc20info` root property has to be checked:
   * if it is `0`, than the status can be seen as `unconfirmed` (still in Tx pool)
   * Otherwise the value is `>=1`:
       * `1` being just created, and thus the highest block is the block in which the address is created
       * Should the App want, it can thus define a more refined status by checking this confirmations value against an arbitrary value (e.g. `6`) to differentiate for example between `confirming` and `confirmed`;

