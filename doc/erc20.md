# ERC-20 threefold tokens

## Motivation

A lot of the bigger exchanges support ERC20 tokens but it would require some effort to support TFT directly. By creating an ERC20 token (TFT20) to represent TFT,
these exchanges can support and allow internal TFT(20) transfers without any effort. 

We propose to be able to send TFT to an Ethereum address, the bridge creates the TFT20 tokens (on face value of the TFT tokens burned) and adds them to the target Ethereum address. 
For the reverse, a receiving address needs to be published on the TFT chain first. A user can withdraw from an exchange to the address generated by the user's TFT wallet and
a block creator node will include the coin creation transaction to a block. Every node can run a validator to only accept valid TFT20 to TFT transactions.
This allows a user to easily convert TFT to TFT20 and back, making the process to transfer TFT to an exchange that supports TFT20 and back almost seamless.

### demo/test exchange wallet

[A small web application is available that mimics the balance page of an exchange for demo, test and development purposes](examples/erc20_monitor).

### Ethereum test networks

#### Rinkeby

Faucets:
- https://faucet.rinkeby.io
  Requires a Twitter, Google+ or Facebook post.

#### Ropsten

Faucets:
- https://faucet.ropsten.be 
  1 test ETH/ day can be requested here

## Technical

- [Explanation of the Ethereum contract](../erc20/README.md)
- [Detailed  description of all ERC20 related transactions](transactions.md#erc20-transactions)
    - Transactions relevant for wallets supporting this functionality:
        - [Convert to erc20 transaction](transactions.md#erc20-convert-transaction)
        - [Withdrawal address registration transaction](transactions.md#erc20-address-registration-transaction)
        - [The coin creation transaction](https://github.com/threefoldfoundation/tfchain/blob/bridge_tft_erc20/doc/transactions.md#erc20-coin-creation-transaction) is created by the bridge, a wallet only needs to be able to understand it to take the coin outputs in to account to be able to spend them.

The Go code defining these transactions resides in [transactions_erc20.go](../pkg/types/transactions_erc20.go)

It is possible to query the status of a withdrawal address registration through the explorer by looking up the ERC20 address using the regular `/explorer/hashes/:hash` endpoint:

* If a [ErrStatusNotFound](https://godoc.org/github.com/threefoldtech/rivine/pkg/api#ErrStatusNotFound) error (HTTP Status 204) is returned, than the ERC20 address can be seen as `unregistered`;
* If a reply is returned than the `confirmations` child property from the `erc20info` root property can be checked if a refined (registration) status check is desired:
   * if it is `0`, than the (registration) status can be seen as `unconfirmed` (still in Tx pool)
   * Otherwise the value is `>=1`:
       * `1` being just created, and thus the highest block is the block in which the address is created
       * Should you want want, you can only see the address as confirmed if it has x or more confirmations (e.g. 6),
         and as such differentiate for example between `confirming` and `confirmed`;
